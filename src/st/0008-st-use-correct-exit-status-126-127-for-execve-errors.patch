From e8db007d5c018beda59d775d3ea28816c36c692a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=D0=BD=D0=B0=D0=B1?= <nabijaczleweli@nabijaczleweli.xyz>
Date: Fri, 30 Dec 2022 03:35:50 +0100
Subject: [PATCH 08/11] st: use correct exit status (126/127) for execve()
 errors
X-Mutt-PGP: OS

Before:
  $ st q
  child exited with status 1
After:
  $ ./st q
  child exited with status 127
---
 st.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/st.c b/st.c
index 27b748b..6a9df62 100644
--- a/st.c
+++ b/st.c
@@ -715,7 +715,7 @@ execsh(char *cmd, char **args)
 	signal(SIGALRM, SIG_DFL);
 
 	execvp(prog, args);
-	_exit(1);
+	_exit(errno == ENOENT ? 127 : 126);
 }
 
 void
-- 
2.39.2

